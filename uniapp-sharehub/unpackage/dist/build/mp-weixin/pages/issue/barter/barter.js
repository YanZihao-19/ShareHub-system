(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/issue/barter/barter"],{"4eac":function(e,t,a){"use strict";(function(e,t){var i=a("4ea4");a("f4b8");i(a("66fd"));var o=i(a("f07e"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(o.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"6d61":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var i={uvRadioGroup:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uv-radio/components/uv-radio-group/uv-radio-group")]).then(a.bind(null,"2e37"))},uvRadio:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uv-radio/components/uv-radio/uv-radio")]).then(a.bind(null,"f7fc"))}},o=function(){var e=this.$createElement,t=(this._self._c,this.formMsg.imgList.length),a=this.formMsg.imgList.length;this.$mp.data=Object.assign({},{$root:{g0:t,g1:a}})},s=[]},"8c43":function(e,t,a){},b4d1:function(e,t,a){"use strict";var i=a("8c43"),o=a.n(i);o.a},b993:function(e,t,a){"use strict";a.r(t);var i=a("c9b4"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},c9b4:function(e,t,a){"use strict";(function(e){var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("94d8")),s={data:function(){return{order:{itemId:"",reason:"",contact:"",mode:"",otherItemId:"",image:""},formMsg:{ownerUid:"",itemTitle:"",itemDesc:"",imgList:[],address:"",sellPrice:"0",originalPrice:"",tag:"",usageLevel:"0",deliveryStyle:"",tradeMode:"1",status:"0",pageFlag:""},multiIndex:[0,0,0],itemLists:["全新","99新","95新","85新"],modalName:"",radioTrade:[{name:"任意",value:0,disabled:!1},{name:"自提",value:1,disabled:!1},{name:"面交",value:2,disabled:!1},{name:"邮寄",value:3,disabled:!1}],radioSuit:[{name:"任意",value:0,disabled:!1},{name:"儿童",value:1,disabled:!1},{name:"成人",value:2,disabled:!1},{name:"老人",value:3,disabled:!1}],classify:"其他闲置",picker:[{tag:1,classify_name:"电子产品"},{tag:2,classify_name:"美妆用品"},{tag:3,classify_name:"图书"},{tag:4,classify_name:"数码影音"},{tag:5,classify_name:"家居日用"},{tag:6,classify_name:"儿童玩具"},{tag:7,classify_name:"宠物用品"},{tag:8,classify_name:"男装"},{tag:9,classify_name:"女装"},{tag:10,classify_name:"母婴用品"},{tag:11,classify_name:"运动户外"},{tag:12,classify_name:"家用电器"},{tag:13,classify_name:"家纺家具"},{tag:14,classify_name:"其他"}],multiArray:[["北京市","重庆市","福建省","江苏省","广东省","辽宁省","内蒙古","山西省","青海省","四川省","贵州省","云南省","陕西省","西藏","宁夏","新疆","广西","海南省","湖南省","湖北省","河南省","山东省","江西省","安徽省","浙江省","上海","黑龙江省","吉林省","甘肃省","天津市","河北省"],["北京市"],["北京大学","中国人民大学","清华大学","北京交通大学","北京工业大学","北京航空航天大学","北京理工大学","北京科技大学","北方工业大学","北京化工大学","北京工商大学","北京服装学院","北京邮电大学","北京印刷学院","北京建筑大学","北京石油化工学院","北京电子科技学院","中国农业大学","北京农学院","北京林业大学","北京协和医学院","首都医科大学","北京中医药大学","北京师范大学","首都师范大学","首都体育学院","北京外国语大学","北京第二外国语学院","北京语言大学","中国传媒大学","中央财经大学","对外经济贸易大学","北京物资学院","首都经济贸易大学","外交学院","中国人民公安大学","国际关系学院","北京体育大学","中央音乐学院","中国音乐学院","中央美术学院","中央戏剧学院","中国戏曲学院","北京电影学院","北京舞蹈学院","中央民族大学","中国政法大学","华北电力大学","中华女子学院","北京信息科技大学","中国矿业大学（北京）","中国石油大学（北京）","中国地质大学（北京）","北京联合大学","北京城市学院","中国青年政治学院","首钢工学院","中国劳动关系学院","北京吉利学院","首都师范大学科德学院","北京工商大学嘉华学院","北京邮电大学世纪学院","北京工业大学耿丹学院","北京警察学院","北京第二外国语学院中瑞酒店管理学院","北京工业职业技术学院","北京信息职业技术学院","北京电子科技职业学院","北京京北职业技术学院","北京交通职业技术学院","北京青年政治学院","北京农业职业学院","北京政法职业学院","北京财贸职业学院","北京北大方正软件职业技术学院","北京经贸职业学院","北京经济技术职业学院","北京戏曲艺术职业学院","北京汇佳职业学院","北京科技经营管理学院","北京科技职业学院","北京培黎职业学院","北京经济管理职业学院","北京劳动保障职业学院","北京社会管理职业学院","北京艺术传媒职业学院","北京体育职业学院","北京交通运输职业学院","北京卫生职业学院","北京网络职业学院","其他"]],region:["四川省","成都市","成都大学"]}},methods:{MultiChange:function(e){this.multiIndex=e.detail.value;var t=this.coordinateToString(this.multiIndex);this.formMsg.address=t},MultiColumnChange:function(e){o.default.all(e,this)},coordinateToString:function(e){return e.join(",")},ChooseImage:function(){var t=this;this.formMsg.imgList.length>=3?e.showToast({title:"最多只能上传3张图片",icon:"none"}):e.chooseImage({count:3-this.formMsg.imgList.length,sizeType:["compressed"],sourceType:["album"],success:function(a){var i=a.tempFilePaths;e.uploadFile({url:"http://localhost:8080/upload?flag=items",filePath:i[0],name:"image",formData:{token:"test"},success:function(e){var a=JSON.parse(e.data);t.formMsg.imgList=t.formMsg.imgList.concat(a.data),console.log(t.formMsg.imgList)}})}})},ViewImage:function(t){e.previewImage({urls:this.formMsg.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var a=this;e.showModal({title:"提示",content:"确定要删除这个照片吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&(a.formMsg.imgList.splice(t.currentTarget.dataset.index,1),a.formMsg.imgList=a.formMsg.imgList)}})},preventClick:function(){e.showToast({title:"以物易物售价为0",icon:"none"})},newInput:function(e){var t;t=/^(\d?)+(\.\d{0,2})?$/.test(e.detail.value)?e.detail.value:e.detail.value.substring(0,e.detail.value.length-1),this.formMsg.originalPrice=t},radioChange:function(e){this.formMsg.deliveryStyle=e.mp.detail.value,console.log(this.formMsg.deliveryStyle)},newState:function(t){var a=this;e.showActionSheet({itemList:a.itemLists,success:function(e){a.formMsg.usageLevel=e.tapIndex}})},modeMove:function(){},showModal:function(e){this.modalName=e.currentTarget.dataset.target},hideModal:function(e){this.modalName=null},getClassify:function(e){this.classify=e.currentTarget.dataset.name,this.formMsg.tag=e.currentTarget.dataset.value,this.hideModal()},onLoad:function(e){this.formMsg.pageFlag=e.pageFlag,this.order=JSON.parse(decodeURIComponent(e.order)),console.log("页面的flag",this.formMsg.pageFlag),console.log("页面的order",this.order)},formSubmit:function(){this.formMsg.ownerUid=this.$store.state.user.openid,this.formMsg.status="0",1==this.formMsg.pageFlag&&(this.order.reason=this.formMsg.itemTitle,this.order.contact=this.formMsg.itemDesc),console.log("即将发送的order",this.order),console.log("即将发送的item",this.formMsg),0==this.formMsg.pageFlag?e.request({url:"http://localhost:8080/items",method:"POST",data:JSON.stringify(this.formMsg),header:{token:"","content-type":"application/json"},success:function(t){if(1==t.data.code){e.showToast({title:"操作成功！",icon:"success",duration:1500});setTimeout((function(){e.navigateBack()}),1e3)}else e.showToast({title:"上传失败！",icon:"error",duration:1500}),console.log("失败！")},fail:function(t){e.showToast({title:"上传失败！",icon:"error",duration:1500}),console.error(t)}}):e.request({url:"http://localhost:8080/orders/addOrder",method:"POST",data:{item:this.formMsg,order:this.order},header:{token:this.token,"content-type":"application/json"},success:function(t){console.log(t.data),1==t.data.code?(e.showToast({title:"操作成功！",icon:"success",duration:1500}),setTimeout((function(){e.navigateBack()}),2e3)):(e.showToast({title:"您已经申请过了~",icon:"error",duration:1500}),setTimeout((function(){e.navigateBack()}),2e3))}})}},onShow:function(){},onHide:function(){},onPullDownRefresh:function(){setTimeout((function(){e.stopPullDownRefresh()}),2e3)}};t.default=s}).call(this,a("543d")["default"])},f07e:function(e,t,a){"use strict";a.r(t);var i=a("6d61"),o=a("b993");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("b4d1");var n=a("f0c5"),r=Object(n["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=r.exports}},[["4eac","common/runtime","common/vendor"]]]);
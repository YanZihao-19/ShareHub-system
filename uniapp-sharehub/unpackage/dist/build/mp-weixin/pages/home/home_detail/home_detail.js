(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home_detail/home_detail"],{"21f2":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return n}));var n={uvTextarea:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uv-textarea/components/uv-textarea/uv-textarea")]).then(o.bind(null,"95c1"))},uvActionSheet:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uv-action-sheet/components/uv-action-sheet/uv-action-sheet")]).then(o.bind(null,"3b3a"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show2=!1})},r=[]},"67b9":function(e,t,o){},"72b1":function(e,t,o){"use strict";(function(e){var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("2eee")),r=n(o("c973")),a={data:function(){return{token:"",showModal:!1,showModal2:"",order:{itemId:"",reason:"",contact:"",mode:"",otherItemId:"",image:""},user:{username:"",credibility:"",role:"",image:"",identifyId:""},item:{id:"",createTime:"",image:"",itemTitle:"",itemDesc:"",tradeMode:"",sellPrice:"",originalPrice:"",usageLevel:"",deliveryStyle:"",ownerUid:""},itemImages:[],actions:[{flag:"0",name:"创建新物品"},{flag:"1",name:"选择已有物品"}],url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg"}},onLoad:function(){var t=this;return(0,r.default)(i.default.mark((function o(){var n,r,a;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:try{t.token=e.getStorageSync("token"),n=getCurrentPages(),r=n[n.length-1],a=r.options.id,t.getItemData(a)}catch(i){console.error("Failed to load data:",i)}case 1:case"end":return o.stop()}}),o)})))()},methods:{select:function(t){this.order.itemId=this.item.id,this.order.mode=this.item.tradeMode,this.order.image=this.item.image,console.log("即将发送的order",this.order),0==t.flag?e.navigateTo({url:"/pages/issue/barter/barter?pageFlag=1&order="+encodeURIComponent(JSON.stringify(this.order))}):1==t.flag&&e.navigateTo({url:"/pages/my/my_issue/my_issue?pageFlag=0&mode=1&order="+encodeURIComponent(JSON.stringify(this.order))})},hideModal:function(){this.showModal2=""},acceptModal:function(){this.showModal2="",this.showModal=!0},handleAction:function(e){0==e.tradeMode?this.showModal=!0:1==e.tradeMode?this.$refs.actionSheet.open():2==e.tradeMode?this.showModal2="show":e.tradeMode},cancel:function(){this.showModal=!1},confirm:function(){this.showModal=!1,0!=this.item.tradeMode&&2!=this.item.tradeMode||(this.order.itemId=this.item.id,this.order.mode=this.item.mode,this.order.image=this.item.image,console.log("发送给后端的订单数据",this.order),e.request({url:"http://localhost:8080/orders/newOrder?mode="+this.item.tradeMode,method:"POST",header:{"content-type":"application/json",token:this.token},data:JSON.stringify(this.order),success:function(t){1==t.data.code?e.showToast({title:"申请成功！",icon:"success",duration:2e3}):0==t.data.code&&e.showToast({title:"不能重复申请哦~",icon:"error",duration:2e3})},fail:function(e){reject(e)}}))},getUser:function(t){var o=this;return new Promise((function(n,i){o.token=e.getStorageSync("token"),e.request({url:"http://localhost:8080/users/user?openId="+t,method:"GET",header:{token:o.token},success:function(e){e.data&&1===e.data.code?(o.user=e.data.data,console.log("this.user的数据：",o.user)):console.error("请求数据失败或返回数据格式不符合预期")},fail:function(e){console.error("请求数据失败",e)}})}))},getItemData:function(t){var o=this;return new Promise((function(n,i){o.token=e.getStorageSync("token"),e.request({url:"http://localhost:8080/items/"+t,method:"GET",header:{token:o.token},success:function(e){e.data&&1===e.data.code?(o.item=e.data.data.item,o.itemImages=e.data.data.itemImages,console.log("this.item的数据：",o.item),o.item.createTime=o.item.createTime.replace("T"," "),console.log("this.item.time的数据：",o.item.createTime),o.getUser(o.item.ownerUid)):console.error("请求数据失败或返回数据格式不符合预期")},fail:function(e){console.error("请求数据失败",e)}})}))},buy:function(t){e.navigateTo({url:"/pages/home/confirm_order/confirm_order"})}}};t.default=a}).call(this,o("543d")["default"])},"8cde":function(e,t,o){"use strict";var n=o("67b9"),i=o.n(n);i.a},be64:function(e,t,o){"use strict";o.r(t);var n=o("21f2"),i=o("c3a6");for(var r in i)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(r);o("8cde");var a=o("f0c5"),s=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=s.exports},c3a6:function(e,t,o){"use strict";o.r(t);var n=o("72b1"),i=o.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},e090:function(e,t,o){"use strict";(function(e,t){var n=o("4ea4");o("f4b8");n(o("66fd"));var i=n(o("be64"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])}},[["e090","common/runtime","common/vendor"]]]);